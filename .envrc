export WORKSPACE_ROOT=$(pwd)

export DEV_SSL_KEY="$WORKSPACE_ROOT/certs/key.pem"
export DEV_SSL_CERT="$WORKSPACE_ROOT/certs/cert.pem"

export VITE_LIVESTORE_SYNC_URL="http://localhost:8787"

# Needed until Corepack newest corepack version is released on nixpkgs
export COREPACK_INTEGRITY_KEYS=0

if test -f ./.envrc.local; then
    source_env ./.envrc.local
fi

if command -v nix-shell &> /dev/null
then
    cd nix
    use_flake
    cd ..
fi

# region-start: expo
# When building react-native on iOS, it requires `cp -X` for macOS than the one from nix.
export PATH="/bin:$WORKSPACE_ROOT/node_modules/.bin:$PATH"

# Remove once fixed https://github.com/NixOS/nixpkgs/issues/355486
export PATH="/usr/bin:/bin:$WORKSPACE_ROOT/node_modules/.bin:$PATH"
# Unset DEVELOPER_DIR to avoid conflicts with Xcode path
unset DEVELOPER_DIR
# remove end
# region-end: expo

source $WORKSPACE_ROOT/examples/src/cli/shell.sh

export LS_DEV=1
export VITE_LS_DEV=$LS_DEV

# export LS_TRACE_VERBOSE="1"
# export VITE_LS_TRACE_VERBOSE="1"
